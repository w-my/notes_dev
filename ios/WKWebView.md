# WKWebView

## 问题优化

两个核心就是缓存和预加载

**问题：加载慢**

1. 独立组件打包分发

   将一组独立网页的 HTML、JavaScript、CSS 等静态资源压缩打包，形成一个离线组件包，在 App 启动后预先下载并解压到手机本地，当用户打开目标网页时，直接从本地加载这些资源。

2. 页面按需预先渲染

   采用了 NSR 的方式，在用户登录成功后，借助 WebView 控件启用一个 JS-Runtime ，在用户手动跳转目标网页之前提前在后台加载本地离线组件包中的资源并发送网络请求获取业务数据，再进行排版和渲染，动态直出，最后将网页设置到内存级别的 MemoryCache 中，从而达到点开即看的效果。

3. 网页容器预初始化

   1. 容器预加载
   2. 微前端架构
   3. 预置离线包

4. 业务请求前置执行

   1. 客户端请求
   2. 网络预加载



